<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://img.icons8.com/?size=100&id=gn5j3rcOh3hP&format=png&color=000000"
        type="image/x-icon">
    <title>Mã Javascript tự động đăng ký lớp</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <!-- Thêm CSS của Prism.js -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <!-- Thêm thư viện Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }

        .code-container {
            position: relative;
            background-color: #2d2d2d;
            border: 1px solid #444;
            padding: 15px;
            border-radius: 8px;
            font-family: "Courier New", Courier, monospace;
            /* color: #f8f8f2; */
            overflow-x: auto;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .copy-btn:hover {
            background-color: #0056b3;
        }

        .copied {
            background-color: #28a745;
        }
    </style>
</head>

<body>
    <h1>Nhập các mã lớp (có dấu phẩy phân cách)</h1>
    <div class="input-group mb-3">
        <input type="text" id="userInput" placeholder="Ví dụ: 158444,158444,158444" class="form-control"
            placeholder="Username" aria-label="Username" aria-describedby="basic-addon1">
    </div>
    <button onclick="processInput()" type="button" class="btn btn-warning">Tạo code</button>

    <hr>
    <h3>Kết quả:</h3>
    <div class="code-container">
        <button id="copyBtn" class="copy-btn" onclick="copyToClipboard()">Copy</button>
        <pre><code id="output" class="language-javascript"></code></pre>
    </div>
    <hr>
    <h1>Hướng dẫn</h1>
    <p>Ở trang đăng ký <a href="https://dk-sis.hust.edu.vn">dk-sis.hust.edu.vn</a> &#8594; nhấn F12 &#8594; Console
        &#8594; paste code vừa copy vào là ok!!!</p>

    <script>
        function processInput() {
            const userInput = document.getElementById('userInput').value;
            const dataArray = userInput.split(',');
            const jsCode = `const dataArray = ${JSON.stringify(dataArray)}; 
const inputBox = document.querySelector('#ctl00_ctl00_ASPxSplitter1_Content_ContentSplitter_MainContent_ASPxCallbackPanel1_tbDirectClassRegister_I'); 
const submitButton = document.querySelector('#ctl00_ctl00_ASPxSplitter1_Content_ContentSplitter_MainContent_ASPxCallbackPanel1_btDirectClassRegister'); 
let currentIndex = 0;
function autoFillAndClick() {
    if (currentIndex < dataArray.length) {            
        inputBox.value = dataArray[currentIndex];
        submitButton.click();            
        console.log(\`Submitted: \${dataArray[currentIndex]}\`);
        currentIndex++;
        setTimeout(autoFillAndClick, 3000);
    } else {
        console.log("All strings have been submitted.");
    }
}
autoFillAndClick();`;
            document.getElementById('output').textContent = jsCode;
            Prism.highlightAll()
        }

        function copyToClipboard() {
            const outputText = document.getElementById('output').textContent;
            const copyBtn = document.getElementById('copyBtn');
            const textarea = document.createElement('textarea');
            textarea.value = outputText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            // Thay đổi trạng thái của nút sau khi sao chép
            copyBtn.textContent = "Copied";
            copyBtn.classList.add("copied");

            // Đặt lại nút về trạng thái ban đầu sau 2 giây
            setTimeout(() => {
                copyBtn.textContent = "Copy";
                copyBtn.classList.remove("copied");
            }, 2000);
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
</body>

</html>